name: quote

on:
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
      - name: Send quote
        shell: pwsh
        env:
          PUSHOVER_APP: ${{ secrets.PUSHOVER_APP_QUOTES}}
          PUSHOVER_RECIPIENT: ${{secrets.PUSHOVER_RECIPIENT}}
        run: |
          $ProgressPreference = 'SilentlyContinue'
          $Quote = (Invoke-RestMethod -Uri http://quotes.rest/qod.json?category=funny).contents.quotes.quote
          Send-PushoverNotification `
              -ApplicationToken "$env:PUSHOVER_APP" `
              -Recipient "$env:PUSHOVER_RECIPIENT" `
              -Title 'Quote of the Day' `
              -Message $Quote `
              -Priority Low
